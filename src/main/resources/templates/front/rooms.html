<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:include="include :: head('做题吧 - 首页')"></head>
<body>
<th:block th:include="include :: f_header"></th:block>
<div class="layui-container layui-fluid">
    <div class="layui-row layui-card">
        <div class="layui-card-header" style="background-color: #E2E2E2">分类筛选</div>
        <div class="layui-card-body layui-form">
            <div class="layui-form-item">
                <label class="layui-form-label">科目分类：</label>
                <div class="layui-input-block">
                    <span class="filter-tag active" data-pid="">全部</span>
                    <span class="filter-tag" th:each="screen : ${screens}" th:data-pid="${screen.id}" th:text="${screen.name}">分类名</span>
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">答卷模式：</label>
                <div class="layui-input-block">
                    <span class="filter-tag active" data-eid="">全部</span>
                    <span class="filter-tag" data-eid="0">标准答题模式</span>
                    <span class="filter-tag" data-eid="1">随机抽取模式</span>
                    <span class="filter-tag" data-eid="2">习题练习模式</span>
                    <span class="filter-tag" data-eid="3">只读学习模式</span>
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">成绩类型：</label>
                <div class="layui-input-block">
                    <span class="filter-tag active" data-mid="">全部</span>
                    <span class="filter-tag" data-mid="0">得分&答案</span>
                    <span class="filter-tag" data-mid="1">得分</span>
                    <span class="filter-tag" data-mid="2">答案</span>
                </div>
            </div>
        </div>
    </div>
    <div class="layui-row layui-card">
        <div class="layui-col-md4 layui-col-sm6 layui-laydate-content" th:each="room : ${rooms}">
            <div style="border: 1px solid #EEEEEE">
                <div class="layui-card-header room-header">
                    <i class="layui-icon layui-icon-component"></i> <span th:text="${room?.title}">答题室标题</span>
                    <span class="layui-badge room-right" th:text="${room?.timeMode==1?'限时答题':'永久有效'}"></span>
                </div>
                <div class="layui-card-body fixed-content-height">
                    <div class="layui-col-md8">
                        <p class="content-area" th:text="${room?.content}">答题室内容</p>
                        <div class="layui-col-xs12">
                            <span class="layui-badge layui-bg-blue">标准答题</span>
                            <span class="layui-border-red" th:text="${room?.timeLen}">15</span>分钟
                        </div>
                        <span style="margin-top: 5px;" class="layui-badge layui-bg-green">进行中</span>
                        <span style="color: #666; margin: 5px 0 0 10px;">考试分类</span>
                    </div>
                    <div class="layui-col-md4">
                        <img src="/images/logo.png" style="height: 120px;padding: 8px;display: flex;"/>
                    </div>
                    <hr/>
                    <div class="layui-col-space5" style="margin-top: 10px;">
                        <div class="layui-col-xs6">
                            <button class="layui-btn layui-btn-fluid layui-btn-primary layui-border-red">
                                <i class="layui-icon layui-icon-edit"></i> 阅卷
                            </button>
                        </div>
                        <div class="layui-col-xs6">
                            <button class="layui-btn layui-btn-fluid layui-btn-primary layui-border-orange">
                                <i class="layui-icon layui-icon-file-b"></i> 报告
                            </button>
                        </div>
                    </div>
                    <button class="layui-btn layui-btn-fluid layui-btn-primary layui-border-purple">
                        <i class="layui-icon layui-icon-play"></i> 进入答题室
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="layui-row layui-card">
        <!-- 分页 -->
        <div id="pagination" class="laytable-cell-space layui-fluid"></div>
    </div>
</div>
<!-- 底部信息 -->
<th:block th:include="include :: f_footer"></th:block>
<script>
    layui.use(['jquery', 'element', 'form', 'laypage'], function ($, element, form, laypage) {
        $(function () {
            layPage('pagination', "[[${count}]]")
            $('.filter-tag[data-pid]').removeClass('active').filter('[data-pid="[[${pid}]]"]').addClass('active');
            $('.filter-tag[data-eid]').removeClass('active').filter('[data-eid="[[${eid}]]"]').addClass('active');
            $('.filter-tag[data-mid]').removeClass('active').filter('[data-mid="[[${mid}]]"]').addClass('active');
        });
        $('.filter-tag').on('click', function () {
            $(this).addClass('active').siblings('.filter-tag').removeClass('active');
            let pid = $('.filter-tag[data-pid].active').data('pid');
            let eid = $('.filter-tag[data-eid].active').data('eid');
            let mid = $('.filter-tag[data-mid].active').data('mid');
            location.href = `/rooms?sid=${pid}&eid=${eid}&mid=${mid}`;
        });
    });
</script>
</body>
</html>